---
title: "[Next.js] Next.js (4) - 서버 컴포넌트 vs 클라이언트 컴포넌트"
categories:
  - React
tags:
  - [Next.js, Server Components, Client Components]
---

# Introduction

---

Next.js App Router의 핵심 개념인 서버 컴포넌트와 클라이언트 컴포넌트의 차이를 알아봅니다.

# 1. 서버 컴포넌트 (기본값)

---

```tsx
// 기본적으로 모든 컴포넌트는 서버 컴포넌트

export default async function PostsPage() {
  // 서버에서 직접 데이터 fetch
  const posts = await fetch('https://api.example.com/posts')
    .then(res => res.json())

  return (
    <ul>
      {posts.map((post: { id: number; title: string }) => (
        <li key={post.id}>{post.title}</li>
      ))}
    </ul>
  )
}
```

## 특징

| 항목 | 설명 |
|------|------|
| 실행 위치 | 서버에서만 |
| JavaScript 전송 | 없음 (번들 크기 감소) |
| async/await | 직접 사용 가능 |
| DB 접근 | 가능 |
| useState | **불가능** |

# 2. 클라이언트 컴포넌트

---

```tsx
'use client'  // ← 이 지시어 필수!

import { useState } from 'react'

export default function Counter() {
  const [count, setCount] = useState(0)

  return (
    <button onClick={() => setCount(count + 1)}>
      Count: {count}
    </button>
  )
}
```

## 특징

| 항목 | 설명 |
|------|------|
| 지시어 | `'use client'` 필수 |
| 실행 위치 | 브라우저 |
| useState | 사용 가능 |
| onClick | 사용 가능 |
| localStorage | 접근 가능 |

# 3. 언제 무엇을 사용?

---

## 서버 컴포넌트

- 데이터 표시만 하는 경우
- SEO가 중요한 콘텐츠
- 상호작용이 없는 UI

## 클라이언트 컴포넌트

- useState, useEffect 필요
- 이벤트 핸들러 (onClick 등)
- 브라우저 API 사용

# 4. 혼합 사용

---

```tsx
// 서버 컴포넌트 (데이터 fetch)
import Counter from './Counter'  // 클라이언트 컴포넌트

export default async function Page() {
  const data = await fetchData()

  return (
    <div>
      <h1>{data.title}</h1>    {/* 서버에서 렌더링 */}
      <Counter />              {/* 클라이언트에서 동작 */}
    </div>
  )
}
```

# 5. 데이터 Fetching 패턴

---

## 서버 컴포넌트에서 fetch

```tsx
// 기본: 자동으로 캐싱됨 (SSG처럼 동작)
const data = await fetch('https://api.example.com/posts')

// 캐시 안 함 (SSR처럼 동작 - 매 요청마다 새로 fetch)
const data = await fetch('https://api.example.com/posts', {
  cache: 'no-store'
})

// 시간 기반 재검증 (ISR처럼 동작 - 60초마다 갱신)
const data = await fetch('https://api.example.com/posts', {
  next: { revalidate: 60 }
})
```

## 캐싱 전략 비교

| 옵션 | 동작 | 용도 |
|------|------|------|
| (기본값) | 빌드 시 캐시, 변경 안 됨 | 정적 콘텐츠 |
| `cache: 'no-store'` | 매번 새로 요청 | 실시간 데이터 |
| `next: { revalidate: N }` | N초마다 백그라운드 갱신 | 주기적 업데이트 |

# 6. 핵심 요약

---

```
서버 컴포넌트 (기본)
├── async/await 직접 사용 가능
├── DB, 파일시스템 접근 가능
├── JavaScript 번들에 포함 안 됨
└── 'use client' 없으면 서버 컴포넌트

클라이언트 컴포넌트 ('use client')
├── useState, useEffect 사용
├── 이벤트 핸들러 (onClick 등)
├── 브라우저 API (localStorage 등)
└── 사용자 인터랙션이 필요한 UI
```

# Reference

---

- [React Server Components](https://react.dev/reference/rsc/server-components)
