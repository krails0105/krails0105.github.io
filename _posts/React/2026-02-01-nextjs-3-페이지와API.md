---
title: "[Next.js] Next.js (3) - 페이지 만들기와 API 라우트"
categories:
  - React
tags:
  - [Next.js, 라우팅, API]
---

# Introduction

---

Next.js에서 페이지를 추가하고 API 엔드포인트를 만드는 방법을 알아봅니다.

# 1. 정적 페이지 추가

---

```tsx
// src/app/about/page.tsx

export default function AboutPage() {
  return (
    <div>
      <h1>About Us</h1>
      <p>우리 팀을 소개합니다.</p>
    </div>
  )
}
```

→ http://localhost:3000/about 에서 접근 가능

# 2. 동적 페이지 (URL 매개변수)

---

```tsx
// src/app/blog/[slug]/page.tsx

export default async function BlogPost({
  params
}: {
  params: Promise<{ slug: string }>
}) {
  const { slug } = await params;

  return <h1>블로그 글: {slug}</h1>
}
```

- `/blog/hello` → slug = "hello"
- `/blog/my-post` → slug = "my-post"

# 3. Link 컴포넌트

---

```tsx
import Link from 'next/link'

export default function Home() {
  return (
    <nav>
      <Link href="/about">About</Link>
      <Link href="/blog/my-post">블로그</Link>
    </nav>
  )
}
```

| 비교 | 동작 |
|------|------|
| `<a href>` | 페이지 전체 새로고침 |
| `<Link href>` | 클라이언트 사이드 이동 (빠름) |

# 4. API 라우트

---

같은 프로젝트에서 백엔드 API를 작성할 수 있습니다.

```ts
// src/app/api/hello/route.ts

import { NextResponse } from 'next/server'

export async function GET() {
  return NextResponse.json({ message: 'Hello!' })
}

export async function POST(request: Request) {
  const body = await request.json()
  return NextResponse.json({ received: body })
}
```

| 함수 | HTTP 메서드 |
|------|------------|
| `GET()` | GET 요청 |
| `POST()` | POST 요청 |
| `PUT()` | PUT 요청 |
| `DELETE()` | DELETE 요청 |

# 5. API 호출하기

---

```tsx
'use client'

import { useState } from 'react'

export default function Home() {
  const [data, setData] = useState(null)

  const fetchData = async () => {
    const res = await fetch('/api/hello')
    const json = await res.json()
    setData(json)
  }

  return (
    <button onClick={fetchData}>
      데이터 가져오기
    </button>
  )
}
```

# 6. 실전 예시: CRUD API

---

```ts
// src/app/api/posts/route.ts

import { NextResponse } from 'next/server'

// 임시 데이터 저장소 (실제로는 DB 사용)
let posts = [
  { id: 1, title: '첫 번째 글' },
  { id: 2, title: '두 번째 글' },
]

// GET /api/posts - 목록 조회
export async function GET() {
  return NextResponse.json(posts)
}

// POST /api/posts - 새 글 작성
export async function POST(request: Request) {
  const body = await request.json()
  const newPost = {
    id: posts.length + 1,
    title: body.title,
  }
  posts.push(newPost)
  return NextResponse.json(newPost, { status: 201 })
}
```

```ts
// src/app/api/posts/[id]/route.ts

import { NextResponse } from 'next/server'

// GET /api/posts/1 - 단일 조회
export async function GET(
  request: Request,
  { params }: { params: Promise<{ id: string }> }
) {
  const { id } = await params
  const post = posts.find(p => p.id === Number(id))

  if (!post) {
    return NextResponse.json(
      { error: 'Not found' },
      { status: 404 }
    )
  }

  return NextResponse.json(post)
}
```

# 7. 유용한 팁

---

## 리다이렉트

```tsx
import { redirect } from 'next/navigation'

export default function Page() {
  const isLoggedIn = false

  if (!isLoggedIn) {
    redirect('/login')  // /login으로 이동
  }

  return <div>비밀 페이지</div>
}
```

## 에러 처리

```tsx
// src/app/posts/[id]/page.tsx
import { notFound } from 'next/navigation'

export default async function PostPage({ params }) {
  const post = await getPost(params.id)

  if (!post) {
    notFound()  // 404 페이지 표시
  }

  return <h1>{post.title}</h1>
}
```

# Reference

---

- [Next.js 라우팅](https://nextjs.org/docs/app/building-your-application/routing)
- [Next.js API Routes](https://nextjs.org/docs/app/building-your-application/routing/route-handlers)
